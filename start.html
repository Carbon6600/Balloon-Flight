<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω—ñ –∫—É–ª—å–∫–∏</title>
    <style>
        /* –§–æ–Ω –∑ –Ω–µ–±–æ–º —Ç–∞ –≥–æ—Ä–∞–º–∏ */
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: Arial, sans-serif;
            overflow: hidden;
            background: linear-gradient(to bottom, #87CEEB, #4682B4);
            transition: background 1s ease;
        }
        .background {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 1; /* –§–æ–Ω –Ω–∏–∂—á–µ –∑–∞ –≤—Å–µ */
        }
        .mountain {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40%;
            background: linear-gradient(to bottom, #2E3D49, #1B252D);
            clip-path: polygon(0% 100%, 20% 50%, 40% 100%, 60% 60%, 80% 100%, 100% 70%, 100% 100%);
        }
        .sun {
            position: absolute;
            top: 10%;
            left: 10%;
            width: 80px;
            height: 80px;
            background: yellow;
            border-radius: 50%;
            box-shadow: 0 0 50px rgba(255, 255, 0, 0.8);
            cursor: pointer;
            animation: sunGlow 2s infinite alternate;
        }
        @keyframes sunGlow {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }

        /* –ê–Ω—ñ–º–∞—Ü—ñ—è –¥–æ—â—É */
        .rain {
            position: absolute;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                to bottom,
                transparent,
                transparent 20px,
                rgba(255, 255, 255, 0.5) 20px,
                rgba(255, 255, 255, 0.5) 40px
            );
            animation: rain 1s linear infinite;
        }
        @keyframes rain {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }

        /* –ê–Ω—ñ–º–∞—Ü—ñ—è —Å–Ω—ñ–≥—É */
        .snow {
            position: absolute;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                to bottom,
                transparent,
                transparent 20px,
                rgba(255, 255, 255, 0.8) 20px,
                rgba(255, 255, 255, 0.8) 40px
            );
            animation: snow 2s linear infinite;
        }
        @keyframes snow {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }

        /* –Ü–≥—Ä–æ–≤–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        #game-container {
            position: relative;
            width: 400px;
            height: 500px;
            border: 2px solid black;
            overflow: hidden;
            background-color: rgba(255, 255, 255, 0.5);
            z-index: 10; /* –í–∏—â–µ –∑–∞ —Ñ–æ–Ω */
        }

        .balloon {
            position: absolute;
            font-size: 1.5em;
            text-align: center;
            user-select: none;
            cursor: pointer;
            transition: transform 0.1s ease-in-out;
        }
        .balloon::before {
            content: "üéà";
            font-size: 50px;
            display: block;
        }
        .golden::before {
            content: "üåü"; /* –ó–æ–ª–æ—Ç–∞ –∫—É–ª—å–∫–∞ */
        }
        .heart::before {
            content: "‚ù§Ô∏è"; /* –ö—É–ª—å–∫–∞-—Å–µ—Ä–¥–µ—á–∫–æ */
        }
        .explosion {
            animation: explode 0.5s ease-out forwards;
        }
        @keyframes explode {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }

        /* –ü–∞–Ω–µ–ª—å –æ—á–æ–∫ —ñ –∂–∏—Ç—Ç—ñ–≤ */
        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 10px;
            width: 400px;
            z-index: 20; /* –í–∏—â–µ –∑–∞ —Ñ–æ–Ω */
        }
        .score {
            flex-grow: 1;
            text-align: center;
            font-size: 24px;
        }
        .lives {
            text-align: right;
        }
        .lives span {
            font-size: 24px;
            color: red;
        }

        /* –ö–Ω–æ–ø–∫–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π */
        .answer-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
            z-index: 30; /* –í–∏—â–µ –∑–∞ –≤—Å–µ */
            position: relative; /* –©–æ–± z-index –ø—Ä–∞—Ü—é–≤–∞–≤ */
        }
        .answer-buttons button {
            font-size: 18px;
            padding: 10px;
            cursor: pointer;
            width: 100px;
            height: 50px;
            background-color: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        .answer-buttons button.hint {
            background-color: #4CAF50; /* –ó–µ–ª–µ–Ω–∏–π –∫–æ–ª—ñ—Ä –¥–ª—è –ø—ñ–¥–∫–∞–∑–∫–∏ */
        }
        .answer-buttons button:hover {
            background-color: rgba(255, 255, 255, 1);
        }

        /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≥—Ä–æ—é */
        .game-controls {
            margin-top: 10px;
            z-index: 30; /* –í–∏—â–µ –∑–∞ –≤—Å–µ */
            position: relative; /* –©–æ–± z-index –ø—Ä–∞—Ü—é–≤–∞–≤ */
        }
        .game-controls button {
            font-size: 18px;
            padding: 10px 20px;
            cursor: pointer;
            background-color: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        .game-controls button:hover {
            background-color: rgba(255, 255, 255, 1);
        }

        /* –°–ø—ñ–≤—ñ—â–µ–Ω–Ω—è –≤ —Å–µ—Ä–µ–¥–∏–Ω—ñ –≥—Ä–∏ */
        .game-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            color: white;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            z-index: 40; /* –ù–∞–π–≤–∏—â–∏–π z-index */
            display: none;
        }

        /* –¢–∞–±–ª–∏—Ü—è —Ä–µ–∫–æ—Ä–¥—ñ–≤ */
        #highscores {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 10px;
            z-index: 20;
            width: 250px;
        }
        #highscores h2 {
            margin: 0 0 10px 0;
            font-size: 18px;
        }
        #highscores ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        #highscores li {
            font-size: 14px;
            margin-bottom: 5px;
        }

        /* –§–æ—Ä–º–∞ –¥–ª—è –≤–≤–µ–¥–µ–Ω–Ω—è —ñ–º–µ–Ω—ñ */
        #name-input {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            z-index: 50;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        #name-input input {
            font-size: 18px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            width: 200px;
        }
        #name-input button {
            font-size: 18px;
            padding: 10px 20px;
            cursor: pointer;
            background-color: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        #name-input button:hover {
            background-color: rgba(255, 255, 255, 1);
        }

        /* –ê–Ω—ñ–º–∞—Ü—ñ—è –ø—Ç–∞—à–∫–∏ */
        .bird {
            position: absolute;
            top: 20%;
            left: -100px;
            font-size: 50px;
            animation: fly 10s linear infinite;
        }
        @keyframes fly {
            0% { transform: translateX(-100px) translateY(0); }
            50% { transform: translateX(100vw) translateY(-20px); }
            100% { transform: translateX(-100px) translateY(0); }
        }

        /* –ê–Ω—ñ–º–∞—Ü—ñ—è –ø—Ä–æ–º–µ–Ω—è —Å–æ–Ω—Ü—è */
        .sun-ray {
            position: absolute;
            top: 10%;
            left: 10%;
            width: 2px;
            height: 0;
            background: rgba(255, 255, 0, 0.5);
            box-shadow: 0 0 10px rgba(255, 255, 0, 0.8);
            animation: ray 2s infinite alternate;
        }
        @keyframes ray {
            0% { height: 0; }
            100% { height: 200px; }
        }
    </style>
</head>
<body>
    <div class="background">
        <div class="sun" id="sun"></div>
        <div class="sun-ray"></div>
        <div class="bird">üê¶</div>
        <div class="mountain"></div>
        <div id="weather-animation"></div> <!-- –ê–Ω—ñ–º–∞—Ü—ñ—è –ø–æ–≥–æ–¥–Ω–∏—Ö —É–º–æ–≤ -->
    </div>

    <h1>–ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω—ñ –∫—É–ª—å–∫–∏</h1>
    <div class="game-info">
        <div class="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
        <div class="score">–û—á–∫–∏: <span id="score">0</span></div>
        <div class="level">–†—ñ–≤–µ–Ω—å: <span id="level">1</span></div>
    </div>
    <div id="game-container"></div>
    <div class="answer-buttons">
        <button onclick="checkAnswer(this)"></button>
        <button onclick="checkAnswer(this)"></button>
        <button onclick="checkAnswer(this)"></button>
        <button onclick="checkAnswer(this)"></button>
    </div>
    <div class="game-controls">
        <button id="start-game-button" onclick="startGame()">–ü–æ—á–∞—Ç–∏ –≥—Ä—É</button>
        <button id="pause-button" onclick="pauseGame()">–ü–∞—É–∑–∞</button>
        <button onclick="showHint()">–ü—ñ–¥–∫–∞–∑–∫–∞</button>
    </div>
    <div class="game-message" id="game-message"></div>

    <!-- –¢–∞–±–ª–∏—Ü—è —Ä–µ–∫–æ—Ä–¥—ñ–≤ -->
    <div id="highscores">
        <h2>–¢–∞–±–ª–∏—Ü—è —Ä–µ–∫–æ—Ä–¥—ñ–≤</h2>
        <ul id="highscores-list"></ul>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–ª—è –≤–≤–µ–¥–µ–Ω–Ω—è —ñ–º–µ–Ω—ñ -->
    <div id="name-input">
        <input type="text" id="player-name" placeholder="–í–≤–µ–¥—ñ—Ç—å –≤–∞—à–µ —ñ–º'—è">
        <button onclick="saveName()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
    </div>

    <script>
        let gameContainer = document.getElementById("game-container");
        let scoreDisplay = document.getElementById("score");
        let livesDisplay = document.querySelector(".lives");
        let levelDisplay = document.getElementById("level");
        let answerButtons = document.querySelectorAll(".answer-buttons button");
        let gameMessage = document.getElementById("game-message");
        let highscoresList = document.getElementById("highscores-list");
        let nameInput = document.getElementById("name-input");
        let playerNameInput = document.getElementById("player-name");
        let pauseButton = document.getElementById("pause-button");
        let startGameButton = document.getElementById("start-game-button");
        let sun = document.getElementById("sun");
        let weatherAnimation = document.getElementById("weather-animation");

        let score = 0;
        let lives = 3;
        let level = 1;
        let gameRunning = false;
        let gamePaused = false;
        let balloons = [];
        let spawnInterval = 2000; // –Ü–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ—è–≤–∏ –∫—É–ª—å–æ–∫
        let balloonSpeed = 1; // –ë–∞–∑–æ–≤–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å –∫—É–ª—å–æ–∫
        let currentAnswers = []; // –ü–æ—Ç–æ—á–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –¥–ª—è –∫–Ω–æ–ø–æ–∫
        let gameInterval;
        let balloonMoveInterval;
        let playerName = localStorage.getItem("playerName") || "";
        let heartsCollected = 0; // –õ—ñ—á–∏–ª—å–Ω–∏–∫ –∑—ñ–±—Ä–∞–Ω–∏—Ö —Å–µ—Ä–¥–µ—á–æ–∫ –Ω–∞ —Ä—ñ–≤–Ω—ñ
        let sunClicks = 0; // –õ—ñ—á–∏–ª—å–Ω–∏–∫ –∫–ª—ñ–∫—ñ–≤ –Ω–∞ —Å–æ–Ω—Ü–µ
        let cheatUsed = false; // –ß–∏—Ç-–∫–æ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ
        let correctAnswersInRow = 0; // –õ—ñ—á–∏–ª—å–Ω–∏–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –ø—ñ–¥—Ä—è–¥
        let secretLevelActive = false; // –ß–∏ –∞–∫—Ç–∏–≤–Ω–∏–π —Å–µ–∫—Ä–µ—Ç–Ω–∏–π —Ä—ñ–≤–µ–Ω—å

        // –ü–æ–≥–æ–¥–Ω—ñ —É–º–æ–≤–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è
        const weatherConditions = [
            { name: "–°–æ–Ω—è—á–Ω–æ", speed: 1, background: "linear-gradient(to bottom, #87CEEB, #4682B4)", animation: "" },
            { name: "–î–æ—â", speed: 0.5, background: "linear-gradient(to bottom, #6C7A89, #2C3E50)", animation: "rain" },
            { name: "–°–Ω—ñ–≥", speed: 0.3, background: "linear-gradient(to bottom, #FFFFFF, #D3D3D3)", animation: "snow" },
            { name: "–¢—É–º–∞–Ω", speed: 0.7, background: "linear-gradient(to bottom, #B0C4DE, #778899)", animation: "" },
            { name: "–í—ñ—Ç–µ—Ä", speed: 1.2, background: "linear-gradient(to bottom, #A9A9A9, #696969)", animation: "" },
        ];

        // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ–∫–æ—Ä–¥—ñ–≤ –∑ localStorage
        let highscores = JSON.parse(localStorage.getItem("highscores")) || [];

        // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ —Ä–µ–∫–æ—Ä–¥—ñ–≤
        function updateHighscores() {
            highscoresList.innerHTML = highscores
                .sort((a, b) => b.score - a.score)
                .slice(0, 5) // –¢—ñ–ª—å–∫–∏ —Ç–æ–ø-5
                .map((record, index) => `<li>${index + 1}. ${record.name}: ${record.score} (${record.date})</li>`)
                .join("");
        }

        // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ä–µ–∫–æ—Ä–¥—É
        function saveHighscore() {
            const date = new Date().toLocaleString();
            highscores.push({ name: playerName, score: score, date: date });
            localStorage.setItem("highscores", JSON.stringify(highscores));
            updateHighscores();
        }

        // –ó–∞–ø–∏—Ç —ñ–º–µ–Ω—ñ –≥—Ä–∞–≤—Ü—è
        function askForName() {
            if (!playerName) {
                nameInput.style.display = "flex";
            } else {
                startGameButton.style.display = "inline-block"; // –ü–æ–∫–∞–∑—É—î–º–æ –∫–Ω–æ–ø–∫—É "–ü–æ—á–∞—Ç–∏ –≥—Ä—É"
            }
        }

        // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ–º–µ–Ω—ñ
        function saveName() {
            playerName = playerNameInput.value.trim();
            if (playerName) {
                localStorage.setItem("playerName", playerName);
                nameInput.style.display = "none";
                startGameButton.style.display = "inline-block"; // –ü–æ–∫–∞–∑—É—î–º–æ –∫–Ω–æ–ø–∫—É "–ü–æ—á–∞—Ç–∏ –≥—Ä—É"
            }
        }

        // –ü–æ–∫–∞–∑ –ø—ñ–¥–∫–∞–∑–∫–∏ (—Ä–æ–±–∏—Ç—å –∫—É–ª—ñ –ø–æ–≤—ñ–ª—å–Ω–∏–º–∏ —Ç–∞ –≤–∏–¥—ñ–ª—è—î –∫–Ω–æ–ø–∫—É)
        function showHint() {
            if (lives > 0) {
                lives--;
                livesDisplay.innerHTML = "‚ù§Ô∏è".repeat(lives);

                // –†–æ–±–∏–º–æ –∫—É–ª—ñ –ø–æ–≤—ñ–ª—å–Ω–∏–º–∏
                balloons.forEach(balloon => {
                    balloon.speed *= 0.5; // –ó–º–µ–Ω—à—É—î–º–æ —à–≤–∏–¥–∫—ñ—Å—Ç—å –∫—É–ª—å–æ–∫
                });

                // –í–∏–¥—ñ–ª—è—î–º–æ –∫–Ω–æ–ø–∫—É –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –≤—ñ–¥–ø–æ–≤—ñ–¥–¥—é
                let correctAnswer = balloons.find(balloon => balloon.element.dataset.answer);
                if (correctAnswer) {
                    answerButtons.forEach(button => {
                        if (button.dataset.answer === correctAnswer.element.dataset.answer) {
                            button.classList.add("hint");
                            setTimeout(() => button.classList.remove("hint"), 3000); // –í–∏–¥–∞–ª—è—î–º–æ –ø—ñ–¥—Å–≤—ñ—Ç–∫—É —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥–∏
                        }
                    });
                }
            }
        }

        // –ü–æ—á–∞—Ç–æ–∫ –≥—Ä–∏
        function startGame() {
            if (gameRunning) return;
            gameRunning = true;
            gamePaused = false;
            score = 0;
            lives = 3;
            level = 1;
            heartsCollected = 0;
            correctAnswersInRow = 0;
            secretLevelActive = false;
            scoreDisplay.innerText = score;
            levelDisplay.innerText = level;
            livesDisplay.innerHTML = "‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è";
            gameContainer.innerHTML = "";
            currentAnswers = [];
            updateAnswerButtons();

            // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –ø–æ–≥–æ–¥–Ω—ñ —É–º–æ–≤–∏ –¥–ª—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Ä—ñ–≤–Ω—è
            const weather = weatherConditions[level - 1];
            document.body.style.background = weather.background;
            balloonSpeed = weather.speed;

            // –û–Ω–æ–≤–ª—é—î–º–æ –∞–Ω—ñ–º–∞—Ü—ñ—é –ø–æ–≥–æ–¥–∏
            weatherAnimation.innerHTML = "";
            if (weather.animation) {
                let animationElement = document.createElement("div");
                animationElement.classList.add(weather.animation);
                weatherAnimation.appendChild(animationElement);
            }

            gameInterval = setInterval(spawnBalloon, spawnInterval);
            balloonMoveInterval = setInterval(moveBalloons, 50);
        }

        // –ü–∞—É–∑–∞ –≥—Ä–∏
        function pauseGame() {
            if (!gameRunning) return;
            gamePaused = !gamePaused;
            if (gamePaused) {
                clearInterval(gameInterval);
                clearInterval(balloonMoveInterval);
                pauseButton.innerText = "–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏";
                showMessage("–ü–∞—É–∑–∞");
            } else {
                pauseButton.innerText = "–ü–∞—É–∑–∞";
                gameInterval = setInterval(spawnBalloon, spawnInterval);
                balloonMoveInterval = setInterval(moveBalloons, 50);
            }
        }

        // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫—É–ª—å–∫–∏
        function spawnBalloon() {
            if (!gameRunning || gamePaused) return;
            
            let num1, num2, answer;
            let balloonType = Math.random();

            if (balloonType < 0.1 && heartsCollected < 2) { // 10% —à–∞–Ω—Å –Ω–∞ –∫—É–ª—å–∫—É-—Å–µ—Ä–¥–µ—á–∫–æ, –∞–ª–µ –Ω–µ –±—ñ–ª—å—à–µ 2 –Ω–∞ —Ä—ñ–≤–µ–Ω—å
                num1 = 1; // –î—É–∂–µ –ø—Ä–æ—Å—Ç–µ —Ä—ñ–≤–Ω—è–Ω–Ω—è
                num2 = 1;
                answer = num1 + num2;
            } else if (balloonType < 0.2) { // 10% —à–∞–Ω—Å –Ω–∞ –∑–æ–ª–æ—Ç—É –∫—É–ª—å–∫—É
                num1 = Math.floor(Math.random() * (level * 3)); // –°–∫–ª–∞–¥–Ω—ñ—à–µ —Ä—ñ–≤–Ω—è–Ω–Ω—è
                num2 = Math.floor(Math.random() * (level * 3));
                answer = num1 + num2;
            } else { // –ó–≤–∏—á–∞–π–Ω–∞ –∫—É–ª—å–∫–∞
                num1 = Math.floor(Math.random() * (level * 2));
                num2 = Math.floor(Math.random() * (level * 2));
                answer = num1 + num2;
            }

            let balloon = document.createElement("div");
            balloon.classList.add("balloon");

            if (balloonType < 0.1 && heartsCollected < 2) { // –ö—É–ª—å–∫–∞-—Å–µ—Ä–¥–µ—á–∫–æ
                balloon.classList.add("heart");
                balloon.innerHTML = `${num1} + ${num2}`;
                balloon.dataset.answer = answer;
                heartsCollected++;
            } else if (balloonType < 0.2) { // –ó–æ–ª–æ—Ç–∞ –∫—É–ª—å–∫–∞
                balloon.classList.add("golden");
                balloon.innerHTML = `${num1} + ${num2}`;
                balloon.dataset.answer = answer;
            } else { // –ó–≤–∏—á–∞–π–Ω–∞ –∫—É–ª—å–∫–∞
                balloon.innerHTML = `${num1} + ${num2}`;
                balloon.dataset.answer = answer;
            }

            balloon.style.left = `${Math.random() * 320}px`;
            balloon.style.top = "450px";

            gameContainer.appendChild(balloon);
            balloons.push({ element: balloon, speed: balloonSpeed + Math.random() * level, sway: Math.random() * 2 - 1 });

            // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö
            updateAnswerButtons();
        }

        // –†—É—Ö –∫—É–ª—å–æ–∫
        function moveBalloons() {
            if (!gameRunning || gamePaused) return;

            balloons.forEach((balloon, index) => {
                let top = parseFloat(balloon.element.style.top) - balloon.speed;
                let left = parseFloat(balloon.element.style.left) + balloon.sway * Math.sin(top / 50);
                
                if (top <= -50) {
                    balloon.element.remove();
                    balloons.splice(index, 1);
                    if (!balloon.element.classList.contains("heart") && !balloon.element.classList.contains("golden")) {
                        loseLife(); // –í—Ç—Ä–∞—á–∞—î–º–æ –∂–∏—Ç—Ç—è –ª–∏—à–µ –¥–ª—è –∑–≤–∏—á–∞–π–Ω–∏—Ö –∫—É–ª—å–æ–∫
                    }
                } else {
                    balloon.element.style.top = top + "px";
                    balloon.element.style.left = left + "px";
                }
            });
        }

        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–Ω–æ–ø–æ–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
        function updateAnswerButtons() {
            // –û—Ç—Ä–∏–º—É—î–º–æ –≤—Å—ñ –∞–∫—Ç–∏–≤–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –∑ –∫—É–ª—å–æ–∫
            let activeAnswers = balloons
                .filter(balloon => balloon.element.dataset.answer)
                .map(balloon => parseInt(balloon.element.dataset.answer));

            // –î–æ–¥–∞—î–º–æ –≤–∏–ø–∞–¥–∫–æ–≤—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, —è–∫—â–æ –∞–∫—Ç–∏–≤–Ω–∏—Ö –º–µ–Ω—à–µ 4
            while (activeAnswers.length < 4) {
                let randomAnswer = Math.floor(Math.random() * (level * 4));
                if (!activeAnswers.includes(randomAnswer)) {
                    activeAnswers.push(randomAnswer);
                }
            }

            // –û–Ω–æ–≤–ª—é—î–º–æ –∫–Ω–æ–ø–∫–∏
            answerButtons.forEach((button, index) => {
                button.innerText = activeAnswers[index];
                button.dataset.answer = activeAnswers[index];
            });
        }

        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
        function checkAnswer(button) {
            if (!gameRunning || gamePaused) return;
            let chosenAnswer = parseInt(button.dataset.answer);

            let balloonsToRemove = balloons.filter(balloon => balloon.element.dataset.answer == chosenAnswer);
            if (balloonsToRemove.length > 0) {
                balloonsToRemove.forEach(balloon => {
                    if (balloon.element.classList.contains("golden")) {
                        score += 50; // –ó–æ–ª–æ—Ç–∞ –∫—É–ª—å–∫–∞ –¥–∞—î –±—ñ–ª—å—à–µ –æ—á–æ–∫
                    } else if (balloon.element.classList.contains("heart")) {
                        lives += 2; // –ö—É–ª—å–∫–∞-—Å–µ—Ä–¥–µ—á–∫–æ –¥–æ–¥–∞—î –¥–≤–∞ –∂–∏—Ç—Ç—è
                        livesDisplay.innerHTML = "‚ù§Ô∏è".repeat(lives);
                    } else {
                        score += 10; // –ó–≤–∏—á–∞–π–Ω–∞ –∫—É–ª—å–∫–∞
                    }
                    balloon.element.classList.add("explosion");
                    setTimeout(() => balloon.element.remove(), 500);
                });
                balloons = balloons.filter(balloon => balloon.element.dataset.answer != chosenAnswer);
                scoreDisplay.innerText = score;

                // –ó–º–µ–Ω—à—É—î–º–æ —à–≤–∏–¥–∫—ñ—Å—Ç—å –∫—É–ª—å–æ–∫, —è–∫—â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –ø—Ä–∞–≤–∏–ª—å–Ω–∞
                balloons.forEach(balloon => {
                    balloon.speed *= 0.9; // –ó–º–µ–Ω—à—É—î–º–æ —à–≤–∏–¥–∫—ñ—Å—Ç—å –Ω–∞ 10%
                });

                // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ –Ω–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å
                if (score >= level * 100) {
                    level++;
                    heartsCollected = 0; // –°–∫–∏–¥–∞—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫ —Å–µ—Ä–¥–µ—á–æ–∫
                    levelDisplay.innerText = level;
                    showMessage(`–†—ñ–≤–µ–Ω—å ${level}!`);
                    spawnInterval = Math.max(1000, spawnInterval - 200); // –ó–º–µ–Ω—à—É—î–º–æ —ñ–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ—è–≤–∏ –∫—É–ª—å–æ–∫
                    balloonSpeed = weatherConditions[level - 1].speed; // –û–Ω–æ–≤–ª—é—î–º–æ —à–≤–∏–¥–∫—ñ—Å—Ç—å –∫—É–ª—å–æ–∫
                    clearInterval(gameInterval);
                    gameInterval = setInterval(spawnBalloon, spawnInterval);

                    // –ó–º—ñ–Ω–∞ —Ñ–æ–Ω—É –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä—ñ–≤–Ω—è
                    document.body.style.background = weatherConditions[level - 1].background;

                    // –û–Ω–æ–≤–ª—é—î–º–æ –∞–Ω—ñ–º–∞—Ü—ñ—é –ø–æ–≥–æ–¥–∏
                    weatherAnimation.innerHTML = "";
                    if (weatherConditions[level - 1].animation) {
                        let animationElement = document.createElement("div");
                        animationElement.classList.add(weatherConditions[level - 1].animation);
                        weatherAnimation.appendChild(animationElement);
                    }
                }
            } else {
                // –Ø–∫—â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞, –∑–Ω—ñ–º–∞—î–º–æ 20 –æ—á–æ–∫
                score = Math.max(0, score - 20);
                scoreDisplay.innerText = score;
                correctAnswersInRow = 0; // –°–∫–∏–¥–∞—î–º–æ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –ø—ñ–¥—Ä—è–¥
            }
        }

        // –í—Ç—Ä–∞—Ç–∞ –∂–∏—Ç—Ç—è
        function loseLife() {
            lives--;
            livesDisplay.innerHTML = "‚ù§Ô∏è".repeat(lives);
            if (lives <= 0) {
                gameRunning = false;
                saveHighscore();
                showMessage(`–ì—Ä—É –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –í–∞—à —Ä–∞—Ö—É–Ω–æ–∫: ${score}`);
                setTimeout(() => location.reload(), 3000);
            }
        }

        // –ü–æ–∫–∞–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
        function showMessage(message) {
            gameMessage.innerText = message;
            gameMessage.style.display = "block";
            setTimeout(() => gameMessage.style.display = "none", 2000);
        }

        // –ß–∏—Ç-–∫–æ–¥: —Ç—Ä–∏ –∫–ª—ñ–∫–∏ –Ω–∞ —Å–æ–Ω—Ü–µ
        sun.addEventListener("click", () => {
            sunClicks++;
            if (sunClicks === 3 && !cheatUsed) {
                lives = 3;
                livesDisplay.innerHTML = "‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è";
                cheatUsed = true;
                showMessage("–ß–∏—Ç-–∫–æ–¥ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ! –ñ–∏—Ç—Ç—è –ø–æ–ø–æ–≤–Ω–µ–Ω–æ.");
            }
        });

        // –ó–∞–ø–∏—Ç —ñ–º–µ–Ω—ñ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        askForName();
        updateHighscores();
    </script>
</body>
</html>
